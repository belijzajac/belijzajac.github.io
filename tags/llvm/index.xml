<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Llvm on belijzajac.dev</title><link>https://belijzajac.dev/tags/llvm/</link><description>Recent content in Llvm on belijzajac.dev</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><managingEditor>blog@belijzajac.dev (belijzajac)</managingEditor><webMaster>blog@belijzajac.dev (belijzajac)</webMaster><copyright>Copyright © 2025 | CC BY-NC-SA 4.0</copyright><lastBuildDate>Mon, 17 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://belijzajac.dev/tags/llvm/index.xml" rel="self" type="application/rss+xml"/><item><title>WisniaLang: Compiler Project</title><link>https://belijzajac.dev/wisnialang-compiler-project/</link><pubDate>Mon, 17 Oct 2022 00:00:00 +0000</pubDate><author>blog@belijzajac.dev (belijzajac)</author><guid>https://belijzajac.dev/wisnialang-compiler-project/</guid><description>&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/dragon-maid-compiler-book.jpg" alt="dragon-book"&gt;&lt;/p&gt;
&lt;h2 id="introduction"&gt;Introduction&lt;/h2&gt;
&lt;p&gt;For the past 3 years, I have been working on the &lt;highlight&gt;&lt;a href="https://github.com/belijzajac/WisniaLang"&gt;WisniaLang&lt;/a&gt;&lt;/highlight&gt; compiler for my own programming language that compiles to native machine code and packs it into an executable by itself. Unlike many others, I rolled out my own compiler backend from scratch that does fast but naive code generation. While it&amp;rsquo;s admittedly a more old-fashioned approach to compiler engineering, it&amp;rsquo;s the path I chose to take when developing my compiler.&lt;/p&gt;
&lt;h2 id="architecture"&gt;Architecture&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/wisnialang-architecture.png" alt="architecture"&gt;&lt;/p&gt;
&lt;p&gt;My compiler&amp;rsquo;s architecture is divided into several main phases that work together to complete this translation. These phases include lexical analysis, which breaks the source code down into smaller pieces called tokens; syntactic analysis, which builds a representation of the structure of the source code called an abstract syntax tree (AST); semantic analysis, which checks the AST for semantic errors while traversing the tree; intermediate representation (IR), which represents the code in a lower-level form close to the target architecture; code generation, which allocates registers and generates machine code from the said IRs; and, lastly, packing the resulting machine code into an executable program in ELF format.&lt;/p&gt;
&lt;h2 id="programming-languages-and-llvm"&gt;Programming languages and LLVM&lt;/h2&gt;
&lt;p&gt;Before going further, let me get straight to the point:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Writing compilers is easy&lt;/li&gt;
&lt;li&gt;Optimizing the machine code is hard&lt;/li&gt;
&lt;li&gt;Supporting arbitrary architectures / operating systems is hard&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/llvm-approach.png" alt="llvm-approach"&gt;&lt;/p&gt;
&lt;p&gt;This is where LLVM comes in handy. LLVM uses an intermediate representation language, which is kind of similar to assembly, but with a few higher level constructs. LLVM is good at optimizing this IR language, as well as compiling into different architecture and binary formats. So as a language author using LLVM, I&amp;rsquo;m really writing a transpiler from my language to LLVM IR, and letting the LLVM compiler do the hard work.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;You talk about LLVM so much, why&amp;rsquo;s that? Let me begin with this illustration:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/llvm-family.png" alt="llvm-family"&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m not sure if it&amp;rsquo;s a positive thing, but the LLVM project has achieved such widespread adoption that it&amp;rsquo;s almost reached a monopoly status, much like the Chromium project, for instance. Apart from Google Chrome, numerous other browsers are built upon the Chromium codebase. From Electron web apps to Arc, Microsoft Edge, Opera, Vivaldi, Brave, and beyond, the list just goes on. Firefox and Safari are perhaps the only web browsers that stand out from this copy-paste crowd.&lt;/p&gt;
&lt;p&gt;I just wanted to point out that while 99.9% of compiler developers opt for LLVM, the remaining few explore alternative compiler backends like &lt;highlight&gt;&lt;a href="https://c9x.me/compile/"&gt;QBE&lt;/a&gt;&lt;/highlight&gt;, develop interpreters (like Python), or create virtual machines (such as the JVM for Java and Kotlin). Some even write transpilers that convert high-level languages into something low-level like C, which is then compiled with gcc. If you recall the dragon compiler book appearing at the top of this page, these and similar compiler books are gradually losing relevance because they don&amp;rsquo;t teach how to use LLVM, the industry&amp;rsquo;s compiler standard.&lt;/p&gt;
&lt;h2 id="benchmark-no-1-fibonacci-sequence"&gt;Benchmark No. 1: Fibonacci sequence&lt;/h2&gt;
&lt;p&gt;To benchmark different compilers, I chose the Fibonacci sequence without recursion problem and computed the 46th Fibonacci number with each compiler under test. This number was chosen because it conveniently fits within 32 bits. Compile-time and runtime benchmarks were performed using the &lt;highlight&gt;&lt;a href="https://github.com/sharkdp/hyperfine"&gt;hyperfine&lt;/a&gt;&lt;/highlight&gt; command-line benchmarking tool, which closely resembles Rust&amp;rsquo;s &lt;highlight&gt;&lt;a href="https://github.com/bheisler/criterion.rs"&gt;Criterion&lt;/a&gt;&lt;/highlight&gt; benchmarking library. Binary size benchmarks were carried out using standard Linux tools like &lt;code&gt;strip&lt;/code&gt; to remove debug symbols from binaries and &lt;code&gt;wc&lt;/code&gt; to display byte counts for each binary file.&lt;/p&gt;
&lt;h3 id="wisnialang-benchmark"&gt;WisniaLang benchmark&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 1&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;fn&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;fibonacci&lt;/span&gt;(n: int) -&amp;gt; int {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 2&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;if&lt;/span&gt; (n &lt;span style="color:#fe8019"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 3&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;return&lt;/span&gt; n;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 4&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 5&lt;/span&gt;&lt;span&gt; int prev &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 6&lt;/span&gt;&lt;span&gt; int current &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 7&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;for&lt;/span&gt; (int i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;2&lt;/span&gt;; i &lt;span style="color:#fe8019"&gt;&amp;lt;=&lt;/span&gt; n; i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; i &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 8&lt;/span&gt;&lt;span&gt; int next &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; prev &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 9&lt;/span&gt;&lt;span&gt; prev &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;10&lt;/span&gt;&lt;span&gt; current &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; next;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;11&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;12&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;return&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;13&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;14&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;15&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;fn&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;16&lt;/span&gt;&lt;span&gt; print(fibonacci(&lt;span style="color:#d3869b"&gt;46&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;17&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./wisnia fibonacci.wsn&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./wisnia fibonacci.wsn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 1.6 ms ± 0.3 ms &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 0.8 ms, System: 0.5 ms&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 1.3 ms … 8.7 ms &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Runtime&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./a.out&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 109.6 µs ± 36.8 µs &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 58.2 µs, System: 4.7 µs&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 84.0 µs … 736.3 µs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;421&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="c-gcc-benchmark"&gt;C++ (gcc) benchmark&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 1&lt;/span&gt;&lt;span&gt;&lt;span style="color:#8ec07c"&gt;#include&lt;/span&gt; &lt;span style="color:#8ec07c;font-style:italic"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span style="color:#8ec07c"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 2&lt;/span&gt;&lt;span&gt;&lt;span style="color:#8ec07c"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;constexpr&lt;/span&gt; &lt;span style="color:#fe8019"&gt;auto&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;fibonacci&lt;/span&gt;(u_int32_t n) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 4&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;if&lt;/span&gt; (n &lt;span style="color:#fe8019"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 5&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;return&lt;/span&gt; n;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 6&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 7&lt;/span&gt;&lt;span&gt; u_int32_t prev &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;0&lt;/span&gt;, current &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 8&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;for&lt;/span&gt; (size_t i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;2&lt;/span&gt;; i &lt;span style="color:#fe8019"&gt;&amp;lt;=&lt;/span&gt; n; i&lt;span style="color:#fe8019"&gt;++&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 9&lt;/span&gt;&lt;span&gt; u_int32_t next &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; prev &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;10&lt;/span&gt;&lt;span&gt; prev &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;11&lt;/span&gt;&lt;span&gt; current &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; next;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;12&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;13&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;return&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;14&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;15&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;16&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;17&lt;/span&gt;&lt;span&gt; std&lt;span style="color:#fe8019"&gt;::&lt;/span&gt;printf(&lt;span style="color:#b8bb26"&gt;&amp;#34;%d&amp;#34;&lt;/span&gt;, fibonacci(&lt;span style="color:#d3869b"&gt;46&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;18&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;g++ -std=c++23 -O3 fibonacci.cpp&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: g++ -std&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;c++23 -O3 fibonacci.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 456.4 ms ± 4.5 ms &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 415.8 ms, System: 35.2 ms&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 448.9 ms … 472.1 ms &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Runtime&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./a.out&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 347.1 µs ± 62.8 µs &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 206.4 µs, System: 67.2 µs&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 271.9 µs … 926.4 µs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;14472&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="c-clang-benchmark"&gt;C++ (clang) benchmark&lt;/h3&gt;
&lt;p&gt;Same program as before, just different compiler.&lt;/p&gt;
&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;clang++ -std=c++2b -O3 fibonacci.cpp&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: clang++ -std&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;c++2b -O3 fibonacci.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 538.2 ms ± 16.9 ms &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 481.7 ms, System: 45.7 ms&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 524.3 ms … 657.9 ms &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Runtime&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./a.out&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 351.4 µs ± 67.7 µs &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 203.2 µs, System: 72.2 µs&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 267.1 µs … 984.8 µs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;14504&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="rust-benchmark"&gt;Rust benchmark&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 1&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;fn&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;fibonacci&lt;/span&gt;(n: &lt;span style="color:#fabd2f"&gt;u32&lt;/span&gt;) -&amp;gt; &lt;span style="color:#fabd2f"&gt;u32&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 2&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;if&lt;/span&gt; n &lt;span style="color:#fe8019"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 3&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;return&lt;/span&gt; n;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 4&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 5&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;let&lt;/span&gt; (&lt;span style="color:#fe8019"&gt;mut&lt;/span&gt; prev, &lt;span style="color:#fe8019"&gt;mut&lt;/span&gt; current) &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; (&lt;span style="color:#d3869b"&gt;0&lt;/span&gt;, &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 6&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;for&lt;/span&gt; _ &lt;span style="color:#fe8019"&gt;in&lt;/span&gt; &lt;span style="color:#d3869b"&gt;2&lt;/span&gt;&lt;span style="color:#fe8019"&gt;..=&lt;/span&gt;n {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 7&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;let&lt;/span&gt; next &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; prev &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 8&lt;/span&gt;&lt;span&gt; prev &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; current;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 9&lt;/span&gt;&lt;span&gt; current &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; next;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;10&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;11&lt;/span&gt;&lt;span&gt; current
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;12&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;13&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;14&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;fn&lt;/span&gt; &lt;span style="color:#fabd2f"&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;15&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;println!&lt;/span&gt;(&lt;span style="color:#b8bb26"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#b8bb26"&gt;{}&lt;/span&gt;&lt;span style="color:#b8bb26"&gt;&amp;#34;&lt;/span&gt;, fibonacci(&lt;span style="color:#d3869b"&gt;46&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;16&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;rustc -C opt-level=3 fibonacci.rs&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: rustc -C opt-level&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;&lt;span style="color:#d3869b"&gt;3&lt;/span&gt; fibonacci.rs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 173.4 ms ± 3.0 ms &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 130.5 ms, System: 51.2 ms&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 168.6 ms … 183.8 ms &lt;span style="color:#d3869b"&gt;100&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Runtime&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;10&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./fibonacci&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./fibonacci
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 490.4 µs ± 82.8 µs &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 264.9 µs, System: 129.3 µs&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 375.1 µs … 1092.6 µs &lt;span style="color:#d3869b"&gt;1000&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip fibonacci
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c fibonacci
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;321920&lt;/span&gt; fibonacci
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="benchmark-no-2-29988-lines-of-code"&gt;Benchmark No. 2: 29'988 lines of code&lt;/h2&gt;
&lt;p&gt;I wrote a &lt;highlight&gt;&lt;a href="https://belijzajac.dev/post-data/main.py"&gt;Python script&lt;/a&gt;&lt;/highlight&gt; that generates program code for WisniaLang, C++, and Rust. It generates similar calls to a function named &lt;code&gt;calculate_1997&lt;/code&gt;, such as &lt;code&gt;calculate_1&lt;/code&gt;, &lt;code&gt;calculate_2&lt;/code&gt;, and &lt;code&gt;calculate_1999&lt;/code&gt;, for over 2000 times:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 1&lt;/span&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 2&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fabd2f"&gt;void&lt;/span&gt; calculate_1997() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 3&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 4&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 5&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; &lt;span style="color:#d3869b"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 6&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fe8019"&gt;while&lt;/span&gt; (b &lt;span style="color:#fe8019"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1997&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 7&lt;/span&gt;&lt;span&gt; a &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; i;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 8&lt;/span&gt;&lt;span&gt; b &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; i;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt; 9&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;10&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;11&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; e &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; d;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;12&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; f &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; e;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;13&lt;/span&gt;&lt;span&gt; i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; f &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; e &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;14&lt;/span&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;15&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;16&lt;/span&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;17&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; main() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;18&lt;/span&gt;&lt;span&gt; ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;19&lt;/span&gt;&lt;span&gt; calculate_1997();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;20&lt;/span&gt;&lt;span&gt; ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;21&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can run this script with &lt;code&gt;python main.py --wisnia --cpp --rust 2000&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id="wisnialang-benchmark-1"&gt;WisniaLang benchmark&lt;/h3&gt;
&lt;p&gt;The program can be found at &lt;highlight&gt;&lt;a href="https://belijzajac.dev/post-data/calculate.wsn"&gt;post-data/calculate.wsn&lt;/a&gt;&lt;/highlight&gt;.&lt;/p&gt;
&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;1&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;./wisnia calculate.wsn&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: ./wisnia calculate.wsn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.367 s ± 0.054 s &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 2.328 s, System: 0.036 s&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.282 s … 2.466 s &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;336025&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="c-gcc-benchmark-1"&gt;C++ (gcc) benchmark&lt;/h3&gt;
&lt;p&gt;The program can be found at &lt;highlight&gt;&lt;a href="https://belijzajac.dev/post-data/calculate.cpp"&gt;post-data/calculate.cpp&lt;/a&gt;&lt;/highlight&gt;.&lt;/p&gt;
&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;1&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;g++ -std=c++23 -O3 calculate.cpp&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: g++ -std&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;c++23 -O3 calculate.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.177 s ± 0.009 s &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 2.110 s, System: 0.064 s&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.156 s … 2.193 s &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;96304&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="c-clang-benchmark-1"&gt;C++ (clang) benchmark&lt;/h3&gt;
&lt;p&gt;Same program as before, just different compiler.&lt;/p&gt;
&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;1&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;clang++ -std=c++2b -O3 calculate.cpp&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: clang++ -std&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;c++2b -O3 calculate.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.179 s ± 0.025 s &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 2.125 s, System: 0.048 s&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.156 s … 2.252 s &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c a.out
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;96336&lt;/span&gt; a.out
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="rust-benchmark-1"&gt;Rust benchmark&lt;/h3&gt;
&lt;p&gt;The program can be found at &lt;highlight&gt;&lt;a href="https://belijzajac.dev/post-data/calculate.rs"&gt;post-data/calculate.rs&lt;/a&gt;&lt;/highlight&gt;.&lt;/p&gt;
&lt;h4&gt;Compile time&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;hyperfine --runs &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; --warmup &lt;span style="color:#d3869b"&gt;1&lt;/span&gt; --shell&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;none &lt;span style="color:#b8bb26"&gt;&amp;#39;rustc -C opt-level=3 calculate.rs&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;Benchmark 1: rustc -C opt-level&lt;span style="color:#fe8019"&gt;=&lt;/span&gt;&lt;span style="color:#d3869b"&gt;3&lt;/span&gt; calculate.rs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; Time &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;mean ± σ&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.353 s ± 0.027 s &lt;span style="color:#fe8019"&gt;[&lt;/span&gt;User: 2.268 s, System: 0.095 s&lt;span style="color:#fe8019"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; Range &lt;span style="color:#fe8019"&gt;(&lt;/span&gt;min … max&lt;span style="color:#fe8019"&gt;)&lt;/span&gt;: 2.324 s … 2.436 s &lt;span style="color:#d3869b"&gt;20&lt;/span&gt; runs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;Binary size&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;strip calculate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt;wc -c calculate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt;&lt;span style="color:#d3869b"&gt;317824&lt;/span&gt; calculate
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="results"&gt;Results&lt;/h2&gt;
&lt;p&gt;Combining mean compile time, runtime, and binary sizes from benchmark results, we obtain the following graphs.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/benchmark-1.png" alt="benchmark-results-1"&gt;&lt;/p&gt;
&lt;p&gt;The runtime range for WisniaLang was from &lt;code&gt;84.0 µs&lt;/code&gt; to &lt;code&gt;736.3 µs&lt;/code&gt; over 1000 program runs, indicating ambiguous results due to benchmarking a 17-line program that executes 3 lines of code 45 times. However, this does demonstrate the speed at which we can compile small programs. In the future, I plan to report on the recursive Fibonacci sequence.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://belijzajac.dev/post-images/benchmark-2.png" alt="benchmark-results-1"&gt;&lt;/p&gt;
&lt;p&gt;WisniaLang generates code as fast as established compilers, but this may be because it doesn&amp;rsquo;t perform many static code analysis or optimization steps. This has resulted in my binary being quite large. In contrast, C++ optimizes out redundant code, simplifying the while loop to use at most three variables. This is the while loop in question:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;1&lt;/span&gt;&lt;span&gt;&lt;span style="color:#fe8019"&gt;while&lt;/span&gt; (b &lt;span style="color:#fe8019"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1997&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;2&lt;/span&gt;&lt;span&gt; a &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; i;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;3&lt;/span&gt;&lt;span&gt; b &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; i;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;4&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;5&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;6&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; e &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; d;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;7&lt;/span&gt;&lt;span&gt; &lt;span style="color:#fabd2f"&gt;int&lt;/span&gt; f &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; a &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; b &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; e;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;8&lt;/span&gt;&lt;span&gt; i &lt;span style="color:#fe8019"&gt;=&lt;/span&gt; f &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; e &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; d &lt;span style="color:#fe8019"&gt;-&lt;/span&gt; c &lt;span style="color:#fe8019"&gt;+&lt;/span&gt; &lt;span style="color:#d3869b"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#756d59"&gt;9&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;What I mean is that C++ likely optimized the code to use only three variables &amp;ndash; &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;b&lt;/code&gt;, and &lt;code&gt;i&lt;/code&gt; &amp;ndash; by substituting the values of &lt;code&gt;c&lt;/code&gt;, &lt;code&gt;d&lt;/code&gt;, &lt;code&gt;e&lt;/code&gt;, and &lt;code&gt;f&lt;/code&gt; directly, thereby reducing redundancy. This is something I&amp;rsquo;ll fix in the future releases of WisniaLang.&lt;/p&gt;
&lt;h2 id="summary"&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;If compilation speed and binary size are important, dropping the LLVM toolchain can have a positive impact&lt;/li&gt;
&lt;li&gt;However, doing so means missing out on LLVM optimizations as well as support for arbitrary OSes and architectures&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>